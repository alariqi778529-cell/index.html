<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø³Ø§Ø­ØªÙ†Ø§ Ø§Ù„Ø®Ø§ØµØ© Ø§Ù„Ø¢Ù…Ù†Ø©</title>
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <style>
        :root { --main-color: #ff4b2b; --bg: #1a1a1a; }
        body { font-family: sans-serif; background: var(--bg); color: white; margin: 0; height: 100vh; display: flex; flex-direction: column; }
        
        /* Ù‚ÙÙ„ Ø§Ù„Ø£Ù…Ø§Ù† */
        #lock { position: fixed; inset: 0; background: white; z-index: 999; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        #lock input { padding: 10px; border: 2px solid var(--main-color); border-radius: 20px; text-align: center; margin-bottom: 10px; }
        
        .header { background: var(--main-color); padding: 15px; text-align: center; font-weight: bold; }
        .info { font-size: 12px; padding: 5px; background: #333; text-align: center; }
        #chat { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }
        .msg { padding: 10px 15px; border-radius: 18px; max-width: 75%; word-wrap: break-word; }
        .sent { align-self: flex-end; background: var(--main-color); }
        .rcvd { align-self: flex-start; background: #444; }
        
        .controls { padding: 15px; background: #222; display: flex; gap: 10px; border-top: 1px solid #444; }
        input { flex: 1; padding: 10px; border-radius: 20px; border: none; outline: none; }
        button { background: var(--main-color); border: none; color: white; padding: 10px 20px; border-radius: 20px; cursor: pointer; }
    </style>
</head>
<body>

<div id="lock">
    <h2 style="color:black">ğŸ”’ Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø³Ø±ÙŠ</h2>
    <input type="password" id="pass" placeholder="****">
    <button onclick="unlock()">Ø¯Ø®ÙˆÙ„</button>
</div>

<div class="header">â¤ï¸ Ù…ÙƒØ§Ù†Ù†Ø§ Ø§Ù„Ø³Ø±ÙŠ Ø§Ù„Ù…ØªØµÙ„ â¤ï¸</div>
<div class="info">
    Ù…ÙØ¹Ø±ÙÙƒ: <span id="my-id">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„...</span><br>
    <input type="text" id="peer-id-input" placeholder="Ø¶Ø¹ Ù…Ø¹Ø±Ù Ø­Ø¨ÙŠØ¨ØªÙƒ Ù‡Ù†Ø§ Ù„Ù„Ø±Ø¨Ø·" style="margin-top:5px; max-width:200px; height:20px; font-size:10px;">
    <button onclick="connectToPeer()" style="padding:2px 10px; font-size:10px;">Ø±Ø¨Ø· Ø§Ù„Ø¢Ù†</button>
</div>

<div id="chat"></div>

<div class="controls">
    <input type="text" id="msg-input" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§...">
    <button onclick="send()">Ø¥Ø±Ø³Ø§Ù„</button>
</div>

<script>
    const SECRET = "7777";
    let peer = new Peer();
    let conn;

    function unlock() {
        if(document.getElementById('pass').value === SECRET) {
            document.getElementById('lock').style.display = 'none';
        } else { alert("Ø§Ù„Ø±Ù…Ø² Ø®Ø·Ø£!"); }
    }

    peer.on('open', id => { document.getElementById('my-id').innerText = id; });

    // Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø§ØªØµØ§Ù„
    peer.on('connection', c => {
        conn = c;
        setupChat();
    });

    function connectToPeer() {
        const id = document.getElementById('peer-id-input').value;
        conn = peer.connect(id);
        setupChat();
    }

    function setupChat() {
        conn.on('data', data => {
            appendMsg(data, 'rcvd');
        });
        alert("ØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù†Ø¬Ø§Ø­! ÙŠÙ…ÙƒÙ†ÙƒÙ…Ø§ Ø§Ù„Ù…Ø±Ø§Ø³Ù„Ø© Ø§Ù„Ø¢Ù†.");
    }

    function send() {
        const val = document.getElementById('msg-input').value;
        if(val && conn) {
            conn.send(val);
            appendMsg(val, 'sent');
            document.getElementById('msg-input').value = '';
        }
    }

    function appendMsg(text, type) {
        const div = document.createElement('div');
        div.className = `msg ${type}`;
        div.innerText = text;
        const chat = document.getElementById('chat');
        chat.appendChild(div);
        chat.scrollTop = chat.scrollHeight;
    }
</script>
</body>
</html>
 
